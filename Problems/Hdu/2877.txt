<html>
<head>
<meta name="keywords" content="HDOJ ACM ICPC OJ C C++ Pascal Java">
<meta http-equiv="Content-Type" content="text/html;charset=gb2312">
<link rel="stylesheet" type="text/css" href="/images/global.css" media="all">
<link rel="stylesheet" type="text/css" href="/css/diyinhead.css" media="all">
<link rel="stylesheet" type="text/css" href="/css/webinhead.css" media="all">
<script src="/js/global.js" type="text/javascript"></script><script src="/js/register.js" type="text/javascript"></script><script src="/js/MathJax/MathJax/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script><title>Problem - 2877</title>
</head>
<body>
<a name="top"></a>
<table align="center" cellspacing="0" cellpadding="0" width="980" border="0" style="word-wrap:break-word">
<tr>
	<td style="border:#1A5CC8 1px solid" align="center" width="100%">
		<a href="/">
			<img src="/images/banner.jpg" width="100%" height="116" border="0">
		</a>
	</td>
</tr>
<tr>
	<td style="border:#1A5CC8 1px solid">
	<table cellspacing="0" cellpadding="1" width="979px">
	<tr bgcolor="#1A5CC8" align="center" class="banner" height="25">
		<td>Online Judge</td>
		<td>Online Exercise</td>
		<td>Online Teaching</td>
		<td>Online Contests</td>
	<td>Exercise Author</td>
	</tr>
	<tr style="font-size:16px" align="center">
		<td width="20%" valign="top">
		<a href="/faq.php" style="text-decoration: none">F.A.Q</a><br>
		<a href="/friends" style="text-decoration: none">Hand In Hand</a><br>
		<a href="/onlineuser.php" style="text-decoration: none">Online Acmers</a>	<br>
		<!-- /onlineuser.php-->
		
		<a href="/forum" style="text-decoration: none">Forum | </a><a href="/discuss/public/list.php" style="text-decoration: none">Discuss</a><br>
		<a href="/statistic/submit_graph.php" style="text-decoration: none">Statistical Charts</a><br>
		</td>
		<td width="20%" valign="top">
		<form action="/search.php" method="get">
		<a href="/listproblem.php?vol=1" style="text-decoration: none">Problem Archive</a><br>
		<!--<a href="http://feeds.feedburner.com/Hdoj-problemset"><img src="/images/rss1.jpg" alt="problemset" style="vertical-align:text-bottom;"width=20 height=20></a><br>-->
		<!--
			 <a href="/submit.php">Submit Solution</a><br>
		-->	
		<a href="/status.php" style="text-decoration: none">Realtime Judge Status</a><br>

		<a href="/ranklist.php" style="text-decoration: none">Authors Ranklist</a><br>
		<input name="field" value="author" type="hidden"><input class="text60" name="key">&#160;<input class="button40" type="submit" value="Search">
		
		<!--
			<input name=field value=problem type=hidden><input class=text60 name=key>&nbsp;<input class=button40 type=submit value=Search>
		-->
		</form>
		</td>
		<td width="20%" valign="top">
		 <form action="/search.php" method="get"> 
		&#160;&#160;&#160;&#160;&#160;<a style="text-decoration: none" href="http://code.hdu.edu.cn/">C/C++/Java Exams &#160;&#160;&#160;&#160;</a><br>
		<a style="text-decoration: none" href="/game">ACM Steps</a><br>
		<a href="/ITJobs/">Go to Job</a><br>	
		<a href="/livecast" style="text-decoration: none">Contest LiveCast</a><br>
		<a style="text-decoration: none" href="/region">ICPC@China</a><br>
		<!-- <a href="/register.php">Register New Author</a><br> -->
		<!-- <a href="/modifyuser.php">Update Your Information</a><br> -->
		</form>
		</td>
		<td width="20%" valign="top">
		<a href="http://bestcoder.hdu.edu.cn" style="text-decoration: none; color: red; font-weight: bold;">Best Coder <sup style="color: gray;">beta</sup></a><br><a href="/vip/contest_list.php" style="text-decoration: none">VIP</a> | <a href="/contests/contest_list.php" style="text-decoration: none">STD Contests</a><br><a href="http://code.hdu.edu.cn/vcontest" style="text-decoration: none">Virtual Contests </a><br>&#160;&#160;<a href="/diy/contest_list.php" style="text-decoration: none">&#160;&#160;DIY | </a><a href="/webcontest" style="text-decoration: none"><font color="">Web-DIY</font> <font size="1" color="gray"><sup>beta</sup></font></a><br><a style="text-decoration: none" href="/recentcontest">Recent Contests</a><br>		</td>
		<td width="20%">
					<form method="post" action="/userloginex.php?action=login">
			  <table width="168" border="0" align="center" cellspacing="0">
			  	<tr><td align="center" colspan="2"><a href="/qqlogin/oauth/login.php"><img src="/qqlogin/images/qqlogin.png" border="0"></a></td></tr>
				<tr>
<td width="68">Author ID&#160;</td>
<td align="right"><input name="username" type="text" class="text90" maxlength="20"></td>
</tr>
				<tr>
<td>Password&#160;</td>
<td align="right"><input name="userpass" type="password" class="text90" maxlength="20"></td>
</tr>
			  </table>
			  <input name="login" type="submit" class="button40" value="Sign In">&#160;<a href="/register.php" style="text-decoration: none">Register new ID</a>
			</form>
						</td>
	</tr>
	</table>
	</td>
</tr>
<tr>
	<td>
		<div align="center" id="rollword"><marquee scrollamount="2" width="600" scrolldelay="30" onmouseover="javascript:this.stop();" onmouseout="javascript:this.start();"><b style="margin-right:20px"><a style="color:red" href="http://acm.hdu.edu.cn/discuss/public/post/reply.php?postid=20680&amp;messageid=1&amp;deep=0">New~ 关于举办杭电程序设计竞赛（2014'12）的报名通知
</a>


<a style="color:blue" href="http://bestcoder.hdu.edu.cn/contests/contest_list.php">【比赛提醒】BestCoder 你报名了吗？（点击报名）</a>

<a href="http://bestcoder.hdu.edu.cn/handbook/handbook-v2.0.htm" style="color:blue">【科普】什么是BestCoder？如何参加？</a><br>
</b></marquee></div>	</td>
</tr>
<tr><td align="center">
<h1 style="color:#1A5CC8">Florid Banner</h1>
<font><b><span style="font-family:Arial;font-size:12px;font-weight:bold;color:green">Time Limit: 2000/1000 MS (Java/Others)&#160;&#160;&#160;&#160;Memory Limit: 32768/32768 K (Java/Others)<br>Total Submission(s): 498&#160;&#160;&#160;&#160;Accepted Submission(s): 82<br></span></b></font><br><br><div class="panel_title" align="left">Problem Description</div> <div class="panel_content">Adam C. Murphy loves shopping. One day, when he was wandering along the avenue, he discovered several stores with florid banners. (A 2*5 example is shown below)<br><center><img src="../../../data/images/convip3-1006-1.JPG"></center> <br>He found them fantastic and decided to get one in order to decorate his fresh new house. Unfortunately, no one meets Adam’s requirement, after visiting all stores nearby. What was worse, all banners left in the stores only have width 1. So he decided to make one himself by sewing them together.<br>Adam wants to make a banner exactly as he designed. He didn’t want to flip or rotate the materials he had, since he believed that keep it in its original way is more beautiful. And he didn’t want to cut the banners for the same reason.<br>Each material had different prices, so he wants to make his florid banner with minimum cost.</div>
<div class="panel_bottom">&#160;</div>
<br><div class="panel_title" align="left">Input</div> <div class="panel_content">The input consists of one or more test cases.<br>Each test case contains two parts.<br>The first part of the input describes the banner Mr. Murphy designed.<br>First line: <br>Two integers M (0&lt;M&lt;=10) and N (0&lt;N&lt;=10,000), describes the width and the length of the banner.<br><br>Second line: <br>One integer t states that the banner has t regions.<br><br>Following t lines: <br>Each line has 5 integers x1,y1,x2,y2,c, represents a region from (x1,y1), the left bottom corner, to (x2,y2), the right top corner, and the color type of this region is c.<br>The whole banner is M*N, with its left bottom located at (0, 0). It is guaranteed that t regions can exactly cover the whole banner once. (0&lt;=x1&lt;x2&lt;=M, 0&lt;=y1&lt;y2&lt;=N)<br><br>The second part describes the materials left in the store. No need to worry about the number of them, because they are infinity.<br>The first line: <br>The number of materials fn(0&lt;=fn&lt;=10000)<br><br>Following fn lines: <br>Each line represents one kind of material. Following an integer P(P&gt;0) indicates the price, and an integer L(1&lt;=L&lt;=20) indicates the length of this banner. Then L integers for this material, i-th number indicates the color at position range from (0,i-1) to (1,i).<br><br>You may assume that the number of colors is no more than 30.<br>Input will be terminated by EOF.<br>
</div>
<div class="panel_bottom">&#160;</div>
<br><div class="panel_title" align="left">Output</div> <div class="panel_content">For each test case, output one line represents the minimum cost of the banner, or ‘impossible’ if Adam can’t make one anyhow.</div>
<div class="panel_bottom">&#160;</div>
<br><div class="panel_title" align="left">Sample Input</div>
<div class="panel_content"><pre><div style="font-family:Courier New,Courier,monospace;">2 5
7
0 0 2 1 0
1 1 2 3 0
0 1 1 2 1
0 2 1 3 2
0 3 2 4 1
0 4 1 5 3
1 4 2 5 2
5
1 3 0 0 0
2 3 2 1 3
2 3 0 1 2
1 2 1 3
5 1 0</div></pre></div>
<div class="panel_bottom">&#160;</div>
<br><div class="panel_title" align="left">Sample Output</div>
<div class="panel_content"><pre><div style="font-family:Courier New,Courier,monospace;">15
<div style="font-family:Times New Roman;font-size:14px;background-color:F4FBFF;border:#B7CBFF 1px dashed;padding:6px">
<div style="font-family:Arial;font-weight:bold;color:#7CA9ED;border-bottom:#B7CBFF 1px dashed"><i>Hint</i></div>
Hint

The pattern of the sample is as follows:
<center><img src="../../../data/images/convip3-1006-2.JPG"></center> 
</div>
<i style="font-size:1px"> </i>
</div></pre></div>
<div class="panel_bottom">&#160;</div>
<br><div class="panel_title" align="left">Source</div> <div class="panel_content"> <a href="/search.php?field=problem&amp;key=2009+Multi-University+Training+Contest+8+-+Host+by+BJNU&amp;source=1&amp;searchmode=source"> 2009 Multi-University Training Contest 8 - Host by BJNU </a> </div> <div class="panel_bottom">&#160;</div>
<br><div class="panel_title" align="left">Recommend</div> <div class="panel_content">gaojie</div>
<div class="panel_bottom">&#160;</div>
<br><center style="font-size:15px;font-family:Arial;font-weight:bold;color:#1A5CC8">
<a href="statistic.php?pid=2877">Statistic</a>&#160;|&#160;<a href="submit.php?pid=2877">Submit</a>&#160;|&#160;<a href="./discuss/problem/list.php?problemid=2877">Discuss</a> | <a href="note/note.php?pid=2877">Note</a><br>
</center>
</td></tr>
<tr>
<td>
	<table style="border:#1A5CC8 1px solid; font-size:14px" cellspacing="0" cellpadding="1" width="100%">
	<tr align="center">
		<td class="footer_link" height="45">
<a href="/">Home</a> | <a href="#top">Top</a>
</td>
		<td style="padding:6px">
			Hangzhou Dianzi University Online Judge 3.0<br>
			Copyright &#169; 2005-2014 <a href="mailto:acm@hdu.edu.cn">HDU ACM Team</a>. All Rights Reserved.<br>
			<a href="../about_us/developer.php">Designer &amp; Developer </a>: <a>Wang Rongtao</a>&amp;nbsp<a>LinLe</a>&amp;nbsp<a href="mailto:gjavac@gmail.com">GaoJie</a>&amp;nbsp<a href="mailto:gl8997@gmail.com">GanLu</a><br>
			<span class="pagerunstatus">Total 0.001000(s) query 2, Server time : 2014-12-16 04:20:02, Gzip disabled</span>		</td>
		<td class="footer_link">
			<!-- <a href="javascript:history.go(-1);">Back</a> | <a href="javascript:history.forward();">Forward</a>-->
			<a href="/admin">Administration</a>	
		</td>
	</tr>
	</table>
</td>
</tr>
</table>
</body>
</html>